{"ast":null,"code":"var _jsxFileName = \"/Users/rezanceva96/movies-explorer-frontend/src/components/SavedMovies/SavedMovies.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport MoviesCardList from \"../MoviesCardList/MoviesCardList\";\nimport SearchForm from \"../SearchForm/SearchForm\";\nimport Header from \"../Header/Header\";\nimport Navigation from \"../Navigation/Navigation\";\nimport { CurrentUserContext } from '../../contexts/CurrentUserContext';\nimport Footer from '../Footer/Footer';\nimport { useLocation } from 'react-router';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction SavedMovies(_ref) {\n  _s();\n\n  let {\n    onHeaderOpen,\n    favoriteList,\n    setFavoriteList,\n    handleDeleteMovies,\n    moviesList,\n    setMoviesList,\n    moviesCount,\n    setMoviesCount,\n    addMovies,\n    setAddMovies\n  } = _ref;\n  const routes = useLocation();\n  const valueData = localStorage.getItem('value');\n  const [value, setValue] = React.useState(valueData && routes.pathname === '/movies' ? valueData : ''); // стейт-переменная состояния тумблера\n\n  const checkBoxStatus = JSON.parse(localStorage.getItem('checkBoxStatus'));\n  const [checked, setChecked] = useState(false);\n  const [shortList, setShortList] = useState([]);\n  useEffect(() => {\n    const filterMovies = JSON.parse(localStorage.getItem('savedMovies')).filter(movie => movie.nameRU.toLowerCase().indexOf(value.toLowerCase()) > -1);\n\n    if (filterMovies.length) {\n      setFavoriteList(filterMovies);\n    } else {\n      setFavoriteList([]);\n    }\n  }, [value, favoriteList, checked]);\n\n  function handleSubmitSearchForm(value) {\n    setValue(value);\n  } // фильтрация массива через установку тумблера (продолжительность фильма)\n\n\n  useEffect(() => {\n    if (checked) {\n      const newShortList = favoriteList.filter(movie => movie.duration <= 40);\n      newShortList.length ? setShortList(newShortList) : setFavoriteList([]);\n    } else {\n      setShortList([]);\n    }\n  }, [checked, favoriteList]);\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"movies movies_saved\",\n    children: [/*#__PURE__*/_jsxDEV(SearchForm, {\n      setMoviesCount: setMoviesCount,\n      value: value,\n      setValue: setValue,\n      handleSubmitSearchForm: handleSubmitSearchForm,\n      checkBoxStatus: checkBoxStatus,\n      checked: checked,\n      setChecked: setChecked\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(MoviesCardList, {\n      favoriteList: checked ? shortList : favoriteList,\n      handleDeleteMovies: handleDeleteMovies,\n      moviesList: moviesList,\n      setMoviesList: setMoviesList,\n      setMoviesCount: setMoviesCount,\n      moviesCount: moviesCount,\n      addMovies: addMovies,\n      setAddMovies: setAddMovies\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 9\n  }, this);\n}\n\n_s(SavedMovies, \"2fGYxw6S1LogDXpZGC8TTV33m1Y=\", false, function () {\n  return [useLocation];\n});\n\n_c = SavedMovies;\nexport default SavedMovies;\n\nvar _c;\n\n$RefreshReg$(_c, \"SavedMovies\");","map":{"version":3,"sources":["/Users/rezanceva96/movies-explorer-frontend/src/components/SavedMovies/SavedMovies.js"],"names":["React","useState","useEffect","MoviesCardList","SearchForm","Header","Navigation","CurrentUserContext","Footer","useLocation","SavedMovies","onHeaderOpen","favoriteList","setFavoriteList","handleDeleteMovies","moviesList","setMoviesList","moviesCount","setMoviesCount","addMovies","setAddMovies","routes","valueData","localStorage","getItem","value","setValue","pathname","checkBoxStatus","JSON","parse","checked","setChecked","shortList","setShortList","filterMovies","filter","movie","nameRU","toLowerCase","indexOf","length","handleSubmitSearchForm","newShortList","duration"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport MoviesCardList from \"../MoviesCardList/MoviesCardList\";\nimport SearchForm from \"../SearchForm/SearchForm\";\nimport Header from \"../Header/Header\";\nimport Navigation from \"../Navigation/Navigation\";\nimport { CurrentUserContext } from '../../contexts/CurrentUserContext';\nimport Footer from '../Footer/Footer';\nimport { useLocation } from 'react-router';\n\n\n\nfunction SavedMovies({ onHeaderOpen,\n    favoriteList,\n    setFavoriteList,\n    handleDeleteMovies,\n    moviesList,\n    setMoviesList,\n    moviesCount,\n    setMoviesCount,\n    addMovies,\n    setAddMovies }) {\n\n    const routes = useLocation()\n    const valueData = localStorage.getItem('value')\n    const [value, setValue] = React.useState(valueData && routes.pathname === '/movies' ? valueData : '')\n\n    // стейт-переменная состояния тумблера\n    const checkBoxStatus = JSON.parse(localStorage.getItem('checkBoxStatus'));\n    const [checked, setChecked] = useState(false);\n    const [shortList, setShortList] = useState([])\n\n    \n    useEffect(() => {\n        const filterMovies = JSON.parse(localStorage.getItem('savedMovies')).filter((movie) =>\n            movie.nameRU.toLowerCase().indexOf(value.toLowerCase()) > -1)\n        if (filterMovies.length) {\n            setFavoriteList(filterMovies)\n        } else {\n            setFavoriteList([])\n        }\n    }, [value, favoriteList, checked])\n\n    function handleSubmitSearchForm(value) {\n        setValue(value);\n    }\n\n    // фильтрация массива через установку тумблера (продолжительность фильма)\n    useEffect(() => {\n        if (checked) {\n            const newShortList = favoriteList.filter(movie => movie.duration <= 40)\n            newShortList.length ?\n                setShortList(newShortList) : setFavoriteList([])\n        } else {\n            setShortList([])\n        }\n    }, [checked, favoriteList])\n\n    return (\n        <section className=\"movies movies_saved\">\n            <SearchForm setMoviesCount={setMoviesCount}\n                value={value}\n                setValue={setValue}\n                handleSubmitSearchForm={handleSubmitSearchForm}\n                checkBoxStatus={checkBoxStatus}\n                checked={checked}\n                setChecked={setChecked}\n                >\n            </SearchForm>\n            <MoviesCardList\n                favoriteList={checked ? shortList : favoriteList}\n                handleDeleteMovies={handleDeleteMovies}\n                moviesList={moviesList}\n                setMoviesList={setMoviesList}\n                setMoviesCount={setMoviesCount}\n                moviesCount={moviesCount}\n                addMovies={addMovies}\n                setAddMovies={setAddMovies}\n            />\n            <Footer></Footer>\n        </section>\n    );\n}\n\nexport default SavedMovies;\n"]},"metadata":{},"sourceType":"module"}