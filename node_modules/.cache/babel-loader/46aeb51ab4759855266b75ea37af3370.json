{"ast":null,"code":"var _jsxFileName = \"/Users/rezanceva96/movies-explorer-frontend/src/components/SavedMovies/SavedMovies.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport MoviesCardList from \"../MoviesCardList/MoviesCardList\";\nimport SearchForm from \"../SearchForm/SearchForm\";\nimport Footer from '../Footer/Footer';\nimport { useLocation } from 'react-router';\nimport { CurrentUserContext } from '../../contexts/CurrentUserContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction SavedMovies(_ref) {\n  _s();\n\n  let {\n    handleDeleteMovies,\n    handleSaveMovies,\n    moviesList,\n    setMoviesList,\n    moviesCount,\n    setMoviesCount,\n    addMovies,\n    setAddMovies,\n    isLoading,\n    setIsLoading,\n    favoriteList,\n    setFavoriteList,\n    favoriteListForRender,\n    setFavoriteListForRender,\n    shortList,\n    setShortList\n  } = _ref;\n  const routes = useLocation();\n  const valueData = localStorage.getItem('value');\n  const [value, setValue] = React.useState(valueData && routes.pathname === '/movies' ? valueData : ''); // стейт-переменная состояния тумблера\n\n  const [checked, setChecked] = useState(false);\n  const [message, setMessage] = React.useState(''); // фильтрация через строку поиска\n\n  useEffect(() => {\n    //    favoriteList.length ? setMessage('') : setMessage('Ничего не найдено') \n    const filterMovies = favoriteList.filter(movie => movie.nameRU.toLowerCase().indexOf(value.toLowerCase()) > -1);\n\n    if (filterMovies.length) {\n      setFavoriteListForRender(filterMovies);\n      localStorage.setItem('foundSaveMovies', JSON.stringify(favoriteList));\n    } else {\n      setFavoriteListForRender([]);\n      setMessage('Ничего не найдено');\n    }\n  }, [value]);\n  console.log(checked); //console.log(checkBoxStatus)\n\n  function handleSubmitSearchForm(value) {\n    setValue(value);\n  } // фильтрация массива через установку тумблера (продолжительность фильма)\n\n\n  useEffect(() => {\n    if (checked && favoriteList.length) {\n      const newShortList = JSON.parse(localStorage.getItem('foundSaveMovies')).filter(movie => movie.duration <= 40);\n      newShortList.length ? setShortList(newShortList) : setShortList([]);\n      localStorage.setItem('foundSaveMovies', JSON.stringify(newShortList));\n    } else {\n      setShortList([]);\n      setMessage('Ничего не найдено');\n    }\n  }, [checked]);\n\n  function handleCheckboxChange(isCheckboxOn) {\n    setChecked(isCheckboxOn);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"movies movies_saved\",\n    children: [/*#__PURE__*/_jsxDEV(SearchForm, {\n      setMoviesCount: setMoviesCount,\n      value: value,\n      setValue: setValue,\n      handleSubmitSearchForm: handleSubmitSearchForm,\n      handleCheckboxChange: handleCheckboxChange,\n      checked: checked,\n      setChecked: setChecked,\n      isLoading: isLoading,\n      setIsLoading: setIsLoading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(MoviesCardList, {\n      favoriteListForRender: checked ? shortList : favoriteListForRender,\n      favoriteList: favoriteList,\n      handleDeleteMovies: handleDeleteMovies,\n      moviesList: moviesList,\n      setMoviesList: setMoviesList,\n      setMoviesCount: setMoviesCount,\n      moviesCount: moviesCount,\n      addMovies: addMovies,\n      setAddMovies: setAddMovies,\n      message: message,\n      setMessage: setMessage,\n      isLoading: isLoading,\n      setIsLoading: setIsLoading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 9\n  }, this);\n}\n\n_s(SavedMovies, \"GzahYDzABdnTxgBAIs3oFcXoPmo=\", false, function () {\n  return [useLocation];\n});\n\n_c = SavedMovies;\nexport default SavedMovies;\n\nvar _c;\n\n$RefreshReg$(_c, \"SavedMovies\");","map":{"version":3,"sources":["/Users/rezanceva96/movies-explorer-frontend/src/components/SavedMovies/SavedMovies.js"],"names":["React","useState","useEffect","MoviesCardList","SearchForm","Footer","useLocation","CurrentUserContext","SavedMovies","handleDeleteMovies","handleSaveMovies","moviesList","setMoviesList","moviesCount","setMoviesCount","addMovies","setAddMovies","isLoading","setIsLoading","favoriteList","setFavoriteList","favoriteListForRender","setFavoriteListForRender","shortList","setShortList","routes","valueData","localStorage","getItem","value","setValue","pathname","checked","setChecked","message","setMessage","filterMovies","filter","movie","nameRU","toLowerCase","indexOf","length","setItem","JSON","stringify","console","log","handleSubmitSearchForm","newShortList","parse","duration","handleCheckboxChange","isCheckboxOn"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport MoviesCardList from \"../MoviesCardList/MoviesCardList\";\nimport SearchForm from \"../SearchForm/SearchForm\";\nimport Footer from '../Footer/Footer';\nimport { useLocation } from 'react-router';\nimport { CurrentUserContext } from '../../contexts/CurrentUserContext';\n\n\n\nfunction SavedMovies({\n    handleDeleteMovies,\n    handleSaveMovies,\n    moviesList,\n    setMoviesList,\n    moviesCount,\n    setMoviesCount,\n    addMovies,\n    setAddMovies,\n    isLoading,\n    setIsLoading,\n    favoriteList,\n    setFavoriteList,\n    favoriteListForRender,\n    setFavoriteListForRender,\n    shortList,\n    setShortList,\n }) {\n\n\n    const routes = useLocation()\n    const valueData = localStorage.getItem('value')\n    const [value, setValue] = React.useState(valueData && routes.pathname === '/movies' ? valueData : '')\n\n    // стейт-переменная состояния тумблера\n    const [checked, setChecked] = useState(false);\n    const [message, setMessage] = React.useState('');\n\n\n\n    // фильтрация через строку поиска\n    useEffect(() => {\n    //    favoriteList.length ? setMessage('') : setMessage('Ничего не найдено') \n        const filterMovies = favoriteList.filter((movie) =>\n            movie.nameRU.toLowerCase().indexOf(value.toLowerCase()) > -1)\n        if (filterMovies.length) {\n            setFavoriteListForRender(filterMovies);\n            localStorage.setItem('foundSaveMovies', JSON.stringify(favoriteList));\n        } else {\n            setFavoriteListForRender([])\n            setMessage('Ничего не найдено');\n        }\n    }, [value])\n\n    console.log(checked)\n    //console.log(checkBoxStatus)\n\n    function handleSubmitSearchForm(value) {\n        setValue(value);\n    }\n\n    // фильтрация массива через установку тумблера (продолжительность фильма)\n    useEffect(() => {\n        if (checked && favoriteList.length) {\n            const newShortList = JSON.parse(localStorage.getItem('foundSaveMovies')).filter(movie => movie.duration <= 40)\n            newShortList.length ?\n                setShortList(newShortList) : setShortList([])\n                localStorage.setItem('foundSaveMovies', JSON.stringify(newShortList));\n        } else {\n            setShortList([])\n            setMessage('Ничего не найдено');\n        }\n    }, [checked])\n\n\n    function handleCheckboxChange(isCheckboxOn) {\n        setChecked(isCheckboxOn)\n    }\n\n\n    return (\n        <section className=\"movies movies_saved\">\n            <SearchForm setMoviesCount={setMoviesCount}\n                value={value}\n                setValue={setValue}\n                handleSubmitSearchForm={handleSubmitSearchForm}\n                handleCheckboxChange={handleCheckboxChange}\n                checked={checked}\n                setChecked={setChecked}\n                isLoading={isLoading}\n                setIsLoading={setIsLoading}\n            >\n            </SearchForm>\n            <MoviesCardList\n                favoriteListForRender={checked ? shortList : favoriteListForRender}\n                favoriteList={favoriteList}\n                handleDeleteMovies={handleDeleteMovies}\n                moviesList={moviesList}\n                setMoviesList={setMoviesList}\n                setMoviesCount={setMoviesCount}\n                moviesCount={moviesCount}\n                addMovies={addMovies}\n                setAddMovies={setAddMovies}\n                message={message}\n                setMessage={setMessage}\n                isLoading={isLoading}\n                setIsLoading={setIsLoading}\n            />\n            <Footer></Footer>\n        </section>\n    );\n}\n\nexport default SavedMovies;\n"]},"metadata":{},"sourceType":"module"}