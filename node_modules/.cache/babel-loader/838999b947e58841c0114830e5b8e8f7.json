{"ast":null,"code":"var _jsxFileName = \"/Users/rezanceva96/movies-explorer-frontend/src/components/Movies/Movies.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport moviesApi from \"../../utils/MoviesApi.js\";\nimport MoviesCard from \"../MoviesCard/MoviesCard.js\";\nimport MoviesCardList from \"../MoviesCardList/MoviesCardList\";\nimport SearchForm from \"../SearchForm/SearchForm\";\nimport Footer from \"../Footer/Footer\";\nimport Header from \"../Header/Header\";\nimport Navigation from \"../Navigation/Navigation\";\nimport Preloader from \"../Preloader/Preloader.js\";\nimport { useLocation } from 'react-router';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Movies(_ref) {\n  _s();\n\n  let {\n    onHeaderOpen,\n    handleSaveMovies,\n    handleDeleteMovies,\n    moviesList,\n    setMoviesList,\n    favoriteList,\n    moviesCount,\n    setMoviesCount,\n    addMovies,\n    setAddMovies\n  } = _ref;\n  const routes = useLocation();\n  const [isLoading, setIsLoading] = React.useState(false);\n  const valueData = localStorage.getItem('value');\n  const [value, setValue] = React.useState(valueData && routes.pathname === '/movies' ? valueData : ''); // стейт-переменная состояния тумблера\n\n  const checkBoxStatus = JSON.parse(localStorage.getItem('checkBoxStatus'));\n  const [checked, setChecked] = useState(false);\n  /*\n  // при возврате - для отрисовки прошлого поиска\n  useEffect(() => {\n      localStorage.foundMovies && setMoviesList(JSON.parse(localStorage.getItem('foundMovies')))\n  }, [handleSaveMovies, handleDeleteMovies])\n  */\n  // фильтрация массива через поиск по ключевому слову\n\n  useEffect(() => {\n    const filterMovies = JSON.parse(localStorage.getItem('movies')).filter(movie => movie.nameRU.toLowerCase().indexOf(value.toLowerCase()) > -1);\n\n    if (filterMovies.length) {\n      setMoviesList(filterMovies);\n      localStorage.setItem('foundMovies', JSON.stringify(filterMovies));\n    } else if (checkBoxStatus === true) {\n      const newShortList = moviesList.filter(movie => movie.duration <= 40);\n      setMoviesList(newShortList);\n    } else {\n      setMoviesList([]);\n    }\n  }, [value]);\n  /*\n  // фильтрация массива через установку тумблера (продолжительность фильма)\n  useEffect(() => {\n      if(checkedActive) {\n          const newShortList = moviesList.filter(movie => movie.duration <= 40);\n          setMoviesList(newShortList)\n      } else {\n          setMoviesList([])\n      }\n  }, [checkedActive])\n    function handleChangeCheckBox(checkboxPosition) {\n      setCheckedActive(checkboxPosition)\n  }\n  */\n\n  function handleChangeCheckBox(checkBoxStatus) {\n    console.log('chek');\n\n    if (checkBoxStatus === true) {\n      const newShortList = moviesList.filter(movie => movie.duration <= 40);\n      return newShortList;\n    } else {\n      return moviesList;\n    }\n  }\n\n  function handleSubmitSearchForm(value) {\n    setValue(value);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"movies\",\n    children: [/*#__PURE__*/_jsxDEV(SearchForm, {\n      setMoviesCount: setMoviesCount,\n      setMoviesList: setMoviesList,\n      handleSubmitSearchForm: handleSubmitSearchForm,\n      handleChangeCheckBox: handleChangeCheckBox,\n      checkBoxStatus: checkBoxStatus,\n      checked: checked,\n      setChecked: setChecked\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(MoviesCardList, {\n      setMoviesCount: setMoviesCount,\n      moviesCount: moviesCount,\n      moviesList: handleChangeCheckBox(),\n      handleSaveMovies: handleSaveMovies,\n      handleDeleteMovies: handleDeleteMovies,\n      favoriteList: favoriteList,\n      addMovies: addMovies,\n      setAddMovies: setAddMovies\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Movies, \"hzXdtnpV2gUhwDn3JqE0rQhooJM=\", false, function () {\n  return [useLocation];\n});\n\n_c = Movies;\nexport default Movies; // первоначальный рендер должен быть пустым, а сейчас карточки рендерятся сразу же\n// нужно добавить сообщения об ошибке, в случае, если фильм не найден\n\nvar _c;\n\n$RefreshReg$(_c, \"Movies\");","map":{"version":3,"sources":["/Users/rezanceva96/movies-explorer-frontend/src/components/Movies/Movies.js"],"names":["React","useEffect","useState","moviesApi","MoviesCard","MoviesCardList","SearchForm","Footer","Header","Navigation","Preloader","useLocation","Movies","onHeaderOpen","handleSaveMovies","handleDeleteMovies","moviesList","setMoviesList","favoriteList","moviesCount","setMoviesCount","addMovies","setAddMovies","routes","isLoading","setIsLoading","valueData","localStorage","getItem","value","setValue","pathname","checkBoxStatus","JSON","parse","checked","setChecked","filterMovies","filter","movie","nameRU","toLowerCase","indexOf","length","setItem","stringify","newShortList","duration","handleChangeCheckBox","console","log","handleSubmitSearchForm"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport moviesApi from \"../../utils/MoviesApi.js\";\nimport MoviesCard from \"../MoviesCard/MoviesCard.js\";\nimport MoviesCardList from \"../MoviesCardList/MoviesCardList\";\nimport SearchForm from \"../SearchForm/SearchForm\";\nimport Footer from \"../Footer/Footer\";\nimport Header from \"../Header/Header\";\nimport Navigation from \"../Navigation/Navigation\";\nimport Preloader from \"../Preloader/Preloader.js\";\nimport { useLocation } from 'react-router';\n\nfunction Movies({ onHeaderOpen,\n    handleSaveMovies,\n    handleDeleteMovies,\n    moviesList,\n    setMoviesList,\n    favoriteList,\n    moviesCount,\n    setMoviesCount,\n    addMovies,\n    setAddMovies }) {\n    const routes = useLocation();\n\n    const [isLoading, setIsLoading] = React.useState(false);\n\n    const valueData = localStorage.getItem('value');\n    const [value, setValue] = React.useState(valueData && routes.pathname === '/movies' ? valueData : '');\n\n    // стейт-переменная состояния тумблера\n    const checkBoxStatus = JSON.parse(localStorage.getItem('checkBoxStatus'));\n    const [checked, setChecked] = useState(false);\n\n    /*\n    // при возврате - для отрисовки прошлого поиска\n    useEffect(() => {\n        localStorage.foundMovies && setMoviesList(JSON.parse(localStorage.getItem('foundMovies')))\n    }, [handleSaveMovies, handleDeleteMovies])\n    */\n\n    // фильтрация массива через поиск по ключевому слову\n    useEffect(() => {\n        const filterMovies = JSON.parse(localStorage.getItem('movies')).filter((movie) =>\n            movie.nameRU.toLowerCase().indexOf(value.toLowerCase()) > -1)\n        if (filterMovies.length) {\n            setMoviesList(filterMovies)\n            localStorage.setItem('foundMovies', JSON.stringify(filterMovies))\n        } else if (checkBoxStatus === true) {\n            const newShortList = moviesList.filter(movie => movie.duration <= 40);\n            setMoviesList(newShortList)\n        } else {\n            setMoviesList([])\n        }\n    }, [value])\n\n    /*\n    // фильтрация массива через установку тумблера (продолжительность фильма)\n    useEffect(() => {\n        if(checkedActive) {\n            const newShortList = moviesList.filter(movie => movie.duration <= 40);\n            setMoviesList(newShortList)\n        } else {\n            setMoviesList([])\n        }\n    }, [checkedActive])\n\n\n    function handleChangeCheckBox(checkboxPosition) {\n        setCheckedActive(checkboxPosition)\n    }\n    */\n    \n    function handleChangeCheckBox(checkBoxStatus) {\n        console.log('chek')\n        if (checkBoxStatus === true) {\n            const newShortList = moviesList.filter(movie => movie.duration <= 40);\n            return newShortList;\n        } else {\n            return moviesList;\n        }\n    }\n    \n    \n\n\n    function handleSubmitSearchForm(value) {\n        setValue(value);\n    }\n\n\n    return (\n        <section className=\"movies\">\n            <SearchForm setMoviesCount={setMoviesCount}\n                setMoviesList={setMoviesList}\n                handleSubmitSearchForm={handleSubmitSearchForm}\n                handleChangeCheckBox={handleChangeCheckBox}\n                checkBoxStatus={checkBoxStatus}\n                checked = {checked}\n                setChecked = {setChecked}\n            >\n            </SearchForm>\n            <MoviesCardList\n                setMoviesCount={setMoviesCount}\n                moviesCount={moviesCount}\n                moviesList={handleChangeCheckBox()}\n                handleSaveMovies={handleSaveMovies}\n                handleDeleteMovies={handleDeleteMovies}\n                favoriteList={favoriteList}\n                addMovies={addMovies}\n                setAddMovies={setAddMovies}\n            />\n            <Footer></Footer>\n        </section>\n\n\n    );\n}\n\nexport default Movies;\n\n// первоначальный рендер должен быть пустым, а сейчас карточки рендерятся сразу же\n// нужно добавить сообщения об ошибке, в случае, если фильм не найден"]},"metadata":{},"sourceType":"module"}